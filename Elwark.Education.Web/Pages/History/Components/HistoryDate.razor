@* ReSharper disable once CheckNamespace *@
@namespace Elwark.Education.Web.Components

@using Elwark.Education.Web.Gateways.Models.History
@inject IStringLocalizer<App> L

<MudText Typo="@Typo" Color="@Color" Class="@Class">
    @if (Date is null)
    {
        @L["HistoricalDate:Unknown"]
    }
    else
    {
        @ToString(Date)
    }
</MudText>

@code {

    [Parameter]
    public HistoricalDate? Date { get; set; }

    [Parameter]
    public Typo Typo { get; set; } = Typo.subtitle1;

    [Parameter]
    public Color Color { get; set; } = Color.Default;

    [Parameter]
    public string? Class { get; set; }

    private string ToString(HistoricalDate date)
    {
        var day = date.Day;
        var month = date.Month.HasValue
            ? CultureInfo.CurrentCulture.DateTimeFormat.GetAbbreviatedMonthName(date.Month.Value)
            : null;

        return date.Year < 0
            ? $"{day} {month} {-date.Year} {L["HistoricalDate:Bc"]}"
            : $"{day} {month} {date.Year}";
    }

}