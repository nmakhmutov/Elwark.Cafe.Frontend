@using Elwark.Education.Web.Gateways.Models.Statistics
@* ReSharper disable once CheckNamespace *@
@namespace Elwark.Education.Web.Components
@inject UrlsOptions Options;
@inject IStringLocalizer<App> L

<ImageBackground>
    <div class="statistics">
        <div class="profile">
            <AuthorizeView>
                <Authorized>
                    <MudAvatar Image="@(context.User.GetImage())" Style="width: 120px; height: 120px"/>
                    <MudText Typo="Typo.h6" GutterBottom="true">
                        @context.User.GetName()
                    </MudText>
                    <MudButton
                        EndIcon="@Icons.Filled.OpenInNew"
                        Color="Color.Primary"
                        Variant="Variant.Filled"
                        Link="@Options.Account.ToString()"
                        Target="_blank">
                        @L["ElwarkAccount"]
                    </MudButton>
                </Authorized>
            </AuthorizeView>
        </div>
        <div class="item">
            <MudIcon Icon="@Icons.Filled.School" Size="Size.Large" Class="mr-3"/>
            <div>
                <MudText Typo="Typo.body2">
                    @L["CompletedTests"]
                </MudText>
                <MudText Typo="Typo.h5">
                    @Statistics.CompletedTests.Total.ToReadable()
                </MudText>
            </div>
        </div>
        <div class="item">
            <MudIcon Icon="@Icons.Filled.Timer" Size="Size.Large" Class="mr-3"/>
            <div>
                <MudText Typo="Typo.body2">
                    @L["TimeSpent"]
                </MudText>
                <MudText Typo="Typo.h5">
                    @Statistics.TimeSpent.ToSimpleFormat()
                </MudText>
            </div>
        </div>
        <div class="item">
            <MudIcon Icon="@Icons.Filled.PendingActions" Size="Size.Large" Class="mr-3"/>
            <div>
                <MudText Typo="Typo.body2">
                    @L["Score"]
                </MudText>
                <MudText Typo="Typo.h5">
                    @Statistics.Score.Total.ToReadable()
                </MudText>
            </div>
        </div>
        <div class="item">
            <MudIcon Icon="@Icons.Filled.HelpOutline" Size="Size.Large" Class="mr-3"/>
            <div>
                <MudText Typo="Typo.body2">
                    @L["Questions"]
                </MudText>
                <MudText Typo="Typo.h5">
                    @Statistics.AnswerRatio.Questions.ToReadable()
                </MudText>
            </div>
        </div>
    </div>
</ImageBackground>

@code {

    [Parameter]
    public StatisticsSummary Statistics { get; set; } = default!;

}