@typeparam T
@inject IStringLocalizer<App> L

@switch (_response.Status)
{
    case ResponseStatus.Loading:
        <Title Value="@L["Loading"]"></Title>
        @Loading
        break;

    case ResponseStatus.Fail:
        <ErrorPage Error="_response.Error"/>
        break;

    case ResponseStatus.Success:
        @Result(_response.Data)
        break;
}

@code {
    private ApiResponse<T> _response = ApiResponse<T>.Loading();

    [Parameter]
    public Func<Task<ApiResponse<T>>> InitLoader { get; set; } = default!;

    [Parameter]
    public RenderFragment Loading { get; set; } = default!;

    [Parameter]
    public RenderFragment<T> Result { get; set; } = default!;

    protected override async Task OnInitializedAsync()
    {
        _response = await InitLoader();
    }

}