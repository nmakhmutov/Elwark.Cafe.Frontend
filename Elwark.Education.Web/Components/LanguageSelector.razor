@using Elwark.Education.Web.Infrastructure.LocalStorage
@inject ILocalStorage LocalStorage
@inject NavigationManager NavigationManager

<MudMenu Icon="@Icons.Filled.Translate" Color="Color.Inherit" OffsetX="true" Direction="Direction.Left">
    @foreach (var (culture, name) in _cultures)
    {
        <MudMenuItem OnClick="@(() => Set(culture))">
            @name
        </MudMenuItem>
    }
</MudMenu>

@code {

    private IReadOnlyDictionary<string, string> _cultures = new Dictionary<string, string>
    {
        ["en"] = "English",
        ["ru"] = "Русский"
    };

    private async Task Set(string language)
    {
        await LocalStorage.SetLanguageAsync(language);
        NavigationManager.NavigateTo(NavigationManager.Uri, true);
    }

}
