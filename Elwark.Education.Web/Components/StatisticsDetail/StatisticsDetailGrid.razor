@using Elwark.Education.Web.Gateways.Models.Statistics
@inject IStringLocalizer<App> L

<div class="common-grid">
    <div class="mud-paper mud-elevation-1 d-flex flex-row justify-space-between pa-6">
        <div>
            <MudText Typo="Typo.h4">
                @Statistics.PassedTests
            </MudText>
            <MudText Typo="Typo.body1">
                Passed tests
            </MudText>
        </div>
        <MudAvatar Size="Size.Large" Square="false" Color="Color.Primary">
            <MudIcon Icon="@Filled.School"/>
        </MudAvatar>
    </div>

    <div class="mud-paper mud-elevation-1 d-flex flex-row justify-space-between pa-6">
        <div>
            <MudText Typo="Typo.h4">
                @Statistics.ElapsedTime
            </MudText>
            <MudText Typo="Typo.body1">
                @L["ElapsedTime"]
            </MudText>
        </div>
        <MudAvatar Size="Size.Large" Square="false" Color="Color.Primary">
            <MudIcon Icon="@Filled.Timer"/>
        </MudAvatar>
    </div>

    <div class="mud-paper mud-elevation-1 pa-6 col--2x">
        <div class="d-flex flex-row justify-space-between">
            <div>
                <MudText Typo="Typo.h4">
                    @Statistics.Score.Total
                </MudText>
                <MudText Typo="Typo.body1">
                    @L["Score"]
                </MudText>
            </div>
            <MudAvatar Size="Size.Large" Square="false" Color="Color.Primary">
                <MudIcon Icon="@Filled.TrendingUp"/>
            </MudAvatar>
        </div>
        <div class="detail-grid">
            <div>
                <MudText Typo="Typo.h6" Align="Align.Center">
                    @Statistics.Score.Questions
                </MudText>
                <MudText Typo="Typo.body1" Align="Align.Center">
                    By questions
                </MudText>
            </div>
            <div>
                <MudText Typo="Typo.h6" Align="Align.Center">
                    @Statistics.Score.Unmistakable
                </MudText>
                <MudText Typo="Typo.body1" Align="Align.Center">
                    Unmistakable bonus
                </MudText>
            </div>
            <div>
                <MudText Typo="Typo.h6" Align="Align.Center">
                    @Statistics.Score.Speed
                </MudText>
                <MudText Typo="Typo.body1" Align="Align.Center">
                    Speed bonus
                </MudText>
            </div>
        </div>
    </div>

    <div class="mud-paper mud-elevation-1 pa-6 col--2x">
        <div class="d-flex flex-row justify-space-between">
            <div>
                <MudText Typo="Typo.h4">
                    @Statistics.AnswerRatio.Questions
                </MudText>
                <MudText Typo="Typo.body1">
                    @L["Questions"]
                </MudText>
            </div>
            <MudAvatar Size="Size.Large" Square="false" Color="Color.Primary">
                <MudIcon Icon="@Filled.Help"/>
            </MudAvatar>
        </div>
        <div class="detail-grid">
            <div>
                <MudText Typo="Typo.h6" Align="Align.Center">
                    @Statistics.AnswerRatio.Correct
                </MudText>
                <MudText Typo="Typo.body1" Align="Align.Center">
                    Correct
                </MudText>
            </div>
            <div>
                <MudText Typo="Typo.h6" Align="Align.Center">
                    @Statistics.AnswerRatio.Incorrect
                </MudText>
                <MudText Typo="Typo.body1" Align="Align.Center">
                    Incorrect
                </MudText>
            </div>
            <div>
                <MudText Typo="Typo.h6" Align="Align.Center">
                    @Statistics.AnswerRatio.Answered
                </MudText>
                <MudText Typo="Typo.body1" Align="Align.Center">
                    Answered
                </MudText>
            </div>
            <div>
                <MudText Typo="Typo.h6" Align="Align.Center">
                    @Statistics.AnswerRatio.NotAnswered
                </MudText>
                <MudText Typo="Typo.body1" Align="Align.Center">
                    Not answered
                </MudText>
            </div>
        </div>
    </div>
</div>

<div class="ranking-grid">
    <div class="mud-paper mud-elevation-1 pa-6">
        <MudText Typo="Typo.h5" Class="mb-2">
            Score ranking
        </MudText>
        <RankingGrid Ranking="@Statistics.ScoreRanking" LinkBuilder="@LinkBuilder"/>
    </div>

    <div class="mud-paper mud-elevation-1 pa-6">
        <MudText Typo="Typo.h5" Class="mb-2">
            Elapsed time ranking
        </MudText>
        <RankingGrid
            Ranking="@Statistics.ElapsedTimeRanking"
            LinkBuilder="@LinkBuilder"
            ValueConverter="@((TimeSpan item) => item.ToSimpleFormat())"/>
    </div>

</div>

@code {

    [Parameter]
    public StatisticsDetail Statistics { get; set; } = default!;

    [Parameter]
    public Func<string, string> LinkBuilder { get; set; } = default!;

}